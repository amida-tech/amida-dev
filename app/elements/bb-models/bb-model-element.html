<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<link rel="import" href="../../bower_components/polymer/polymer.html">
<link rel="import" href="../../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="bb-model-api.html">

<dom-module id="bb-model-element">
  <style>
    :host {
      display: block;
      margin: 16px 16px;
      @apply(--layout-vertical);
    }
    paper-material{
      width:900px;
      margin: 16px 16px;
    }
    #exampleBtn.iron-selected{
      color:white;
      background:white;
    }
    #exampleBtn{
      color:white;
      background:#333333;
    }
    #schemaBtn.iron-selected{
      color:white;
      background:white;
    }
    #schemaBtn{
      color:white;
      background:#333333;
    }
  </style>
  <template>
    <bb-model-api id="bb_model_api">
    </bb-model-api>
    <iron-selector class="layout horizontal  flex self-center" selected="{{selected}}">
      <paper-button id="schemaBtn">show <span>{{modelType}}</span> schema</paper-button>
      <paper-button id="exampleBtn">show <span>{{modelType}}</span> example</paper-button>
    </iron-selector>
    <iron-pages class="flex" selected="{{selected}}">
    <div class="flex layout vertical">
      <h2 class="paper-font-display1 flex self-center"><span>{{modelType}}</span> Schema</h2>
      <paper-material elevation="1" class=" flex self-center">
        <pre>
          <code id="schemaCode" class="json">
          </code>
        </pre>
      </paper-material>
    </div>
    <div class="flex layout vertical">
      <h2 class="paper-font-display1 flex self-center"><span>{{modelType}}</span> Example</h2>
      <paper-material elevation-"1" class="flex self-center">
        <pre>
          <code id="exampleCode" class="json"></code>
        </pre>
      </paper-material>
    </div>
    </iron-pages>
  </template>
</dom-module>
<script>
(function() {
  Polymer({
    is: 'bb-model-element',

    properties: {
      foo: {
        type: String,
        value: 'bar',
        notify: true
      },
      modelType: {
        type: String,
        notify: true,
        reflectToAttribute: true
      }
    },
    schemaTextChanged:function(){
      // console.log(this.schemaText)
    },
    schemaResponse: function(e){
      // console.log(e.detail.response);
      var json = JSON.stringify(e.detail.response, null, 2);
      this.$.schemaCode.textContent = json;
      Prism.highlightAll();
      console.log(Prism)
    },
    exampleResponse: function(e){
      // console.log(e.detail.response);
      this.$.exampleCode.innerText = JSON.stringify( e.detail.response, null, 2 );
      Prism.highlightAll();

    },
    created: function(){
      // console.log(hljs)
    },
    ready: function(){
      this.$.bb_model_api.modelType= this.modelType;
      this.selected = "0";
      // this.$.bb_model_api.schemaUrl="elements/bb-models/model-document-schema.json"
      // this.$.bb_model_api.exampleUrl="elements/bb-models/model-document-example.json"
    }
  });
})();
</script>
